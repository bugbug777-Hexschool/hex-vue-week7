"use strict";(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[947],{4947:function(t,e,l){l.r(e),l.d(e,{default:function(){return zt}});var o=l(3396),a=l(7139);const d={class:"container | p-3"},i=(0,o._)("h1",{class:"mb-4"},"產品列表",-1),s={class:"text-end | mb-4"},r={class:"table | mb-4"},n=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{width:"120"},"分類"),(0,o._)("th",null,"產品名稱"),(0,o._)("th",{width:"120"},"原價"),(0,o._)("th",{width:"120"},"售價"),(0,o._)("th",{width:"100"},"是否啟用"),(0,o._)("th",{width:"120"},"編輯")])],-1),c={key:0,class:"text-success"},u={key:1},p={class:"btn-group"},m=["onClick"],b=["onClick"],_={class:"d-flex justify-content-end"};function h(t,e,l,h,g,f){const v=(0,o.up)("Pagination"),y=(0,o.up)("ProductModal"),w=(0,o.up)("DelProductModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",d,[i,(0,o._)("div",s,[(0,o._)("button",{onClick:e[0]||(e[0]=t=>f.open_modal("new")),type:"button",class:"btn btn-primary"},"建立新的產品")]),(0,o._)("table",r,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(g.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,(0,a.zw)(t.category),1),(0,o._)("td",null,(0,a.zw)(t.title),1),(0,o._)("td",null,(0,a.zw)(t.origin_price),1),(0,o._)("td",null,(0,a.zw)(t.price),1),(0,o._)("td",null,[t.is_enabled?((0,o.wg)(),(0,o.iD)("span",c,"啟用")):((0,o.wg)(),(0,o.iD)("span",u,"未啟用"))]),(0,o._)("td",null,[(0,o._)("div",p,[(0,o._)("button",{onClick:e=>f.open_modal("edit",t),type:"button",class:"btn btn-outline-primary btn-sm"}," 編輯 ",8,m),(0,o._)("button",{onClick:e=>f.open_modal("delete",t),type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ",8,b)])])])))),128))])]),(0,o._)("div",_,[(0,o.Wm)(v,{pagination:g.pagination,onUpdate:f.get_products},null,8,["pagination","onUpdate"])])]),(0,o.Wm)(y,{ref:"productModal",onUpdate:f.get_products},null,8,["onUpdate"]),(0,o.Wm)(w,{ref:"delProductModal",onUpdate:f.get_products},null,8,["onUpdate"])],64)}var g=l(9242);const f=t=>((0,o.dD)("data-v-5cd9b380"),t=t(),(0,o.Cn)(),t),v={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},y={class:"modal-dialog modal-xl"},w={class:"modal-content border-0"},k=f((()=>(0,o._)("div",{class:"modal-header bg-dark text-white"},[(0,o._)("h5",{id:"productModalLabel",class:"modal-title"},[(0,o._)("span",null,"新增產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),U={class:"modal-body"},x={class:"row"},C={class:"col-sm-4"},D=f((()=>(0,o._)("h2",null,"主要圖片",-1))),M={class:"mb-2"},V={class:"mb-3"},P={key:0,class:"input-group | mb-3"},$={type:"file",class:"form-control",ref:"file",id:"file","aria-describedby":"uploadImg","aria-label":"Upload"},W=["src"],q=f((()=>(0,o._)("h2",null,"新增多圖",-1))),z={key:0},L={class:"mb-3"},N=["onUpdate:modelValue","placeholder"],Z=["src"],H={key:0},O={key:1},T={key:1},Y={class:"col-sm-8"},A={class:"mb-3"},I=f((()=>(0,o._)("label",{for:"title",class:"form-label"},"標題",-1))),K={class:"row"},j={class:"mb-3 col-md-6"},F=f((()=>(0,o._)("label",{for:"category",class:"form-label"},"分類",-1))),B={class:"mb-3 col-md-6"},E=f((()=>(0,o._)("label",{for:"price",class:"form-label"},"單位",-1))),G={class:"row"},J={class:"mb-3 col-md-6"},Q=f((()=>(0,o._)("label",{for:"origin_price",class:"form-label"},"原價",-1))),R={class:"mb-3 col-md-6"},S=f((()=>(0,o._)("label",{for:"price",class:"form-label"},"售價",-1))),X=f((()=>(0,o._)("hr",null,null,-1))),tt={class:"mb-3"},et=f((()=>(0,o._)("label",{for:"description",class:"form-label"},"產品描述",-1))),lt={class:"mb-3"},ot=f((()=>(0,o._)("label",{for:"content",class:"form-label"},"說明內容",-1))),at={class:"mb-3"},dt={class:"form-check"},it=f((()=>(0,o._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1))),st={class:"modal-footer"},rt=f((()=>(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)));function nt(t,e,l,d,i,s){const r=(0,o.up)("v-field"),n=(0,o.up)("error-message"),c=(0,o.up)("v-form");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("div",y,[(0,o._)("div",w,[k,(0,o._)("div",U,[(0,o._)("div",x,[(0,o._)("div",C,[D,(0,o._)("div",M,[(0,o._)("div",V,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.product.imageUrl=t),type:"text",class:"form-control",placeholder:"請輸入主要圖片連結"},null,512),[[g.nr,i.product.imageUrl]])]),i.product.imageUrl?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("input",$,null,512),(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>s.upload_image&&s.upload_image(...t)),class:"btn btn-outline-secondary",type:"button"}," 上傳圖片 ")])),i.product.imageUrl?((0,o.wg)(),(0,o.iD)("img",{key:1,class:"img-fluid img-control",src:i.product.imageUrl,alt:"圖片無法顯示",style:{height:"200px"}},null,8,W)):(0,o.kq)("",!0)]),q,Array.isArray(i.product.imagesUrl)?((0,o.wg)(),(0,o.iD)("div",z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.product.imagesUrl,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{key:e+123},[(0,o._)("div",L,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t=>i.product.imagesUrl[e]=t,type:"text",class:"form-control",placeholder:`請輸入圖片 ${e+1} 連結`},null,8,N),[[g.nr,i.product.imagesUrl[e]]])]),t?((0,o.wg)(),(0,o.iD)("img",{key:0,class:"img-fluid img-control",src:t,alt:"圖片無法顯示",style:{height:"200px"}},null,8,Z)):(0,o.kq)("",!0)])))),128)),!i.product.imagesUrl.length||i.product.imagesUrl[i.product.imagesUrl.length-1]?((0,o.wg)(),(0,o.iD)("div",H,[(0,o._)("button",{onClick:e[2]||(e[2]=(...t)=>s.add_image&&s.add_image(...t)),class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")])):((0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("button",{onClick:e[3]||(e[3]=(...t)=>s.del_image&&s.del_image(...t)),class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 ")]))])):((0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("button",{onClick:e[4]||(e[4]=(...t)=>s.add_image&&s.add_image(...t)),class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")]))]),(0,o._)("div",Y,[(0,o.Wm)(c,null,{default:(0,o.w5)((({errors:t})=>[(0,o._)("div",A,[I,(0,o.Wm)(r,{modelValue:i.product.title,"onUpdate:modelValue":e[5]||(e[5]=t=>i.product.title=t),id:"title",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["Title"]}]),rules:"required",name:"Title",placeholder:"請輸入標題"},null,8,["modelValue","class"]),(0,o.Wm)(n,{name:"Title",class:"invalid-feedback"})]),(0,o._)("div",K,[(0,o._)("div",j,[F,(0,o.Wm)(r,{modelValue:i.product.category,"onUpdate:modelValue":e[6]||(e[6]=t=>i.product.category=t),id:"category",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["Category"]}]),rules:"required",name:"Category",placeholder:"請輸入分類"},null,8,["modelValue","class"]),(0,o.Wm)(n,{name:"Category",class:"invalid-feedback"})]),(0,o._)("div",B,[E,(0,o.Wm)(r,{modelValue:i.product.unit,"onUpdate:modelValue":e[7]||(e[7]=t=>i.product.unit=t),id:"unit",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["Unit"]}]),rules:"required",name:"Unit",placeholder:"請輸入單位"},null,8,["modelValue","class"]),(0,o.Wm)(n,{name:"Unit",class:"invalid-feedback"})])]),(0,o._)("div",G,[(0,o._)("div",J,[Q,(0,o.Wm)(r,{modelValue:i.product.origin_price,"onUpdate:modelValue":e[8]||(e[8]=t=>i.product.origin_price=t),modelModifiers:{number:!0},id:"origin_price",type:"number",min:"0",class:(0,a.C_)(["form-control",{"is-invalid":t["OriginPrice"]}]),rules:"required",name:"OriginPrice",placeholder:"請輸入原價"},null,8,["modelValue","class"]),(0,o.Wm)(n,{name:"OriginPrice",class:"invalid-feedback"})]),(0,o._)("div",R,[S,(0,o.Wm)(r,{modelValue:i.product.price,"onUpdate:modelValue":e[9]||(e[9]=t=>i.product.price=t),modelModifiers:{number:!0},id:"price",type:"number",min:"0",class:(0,a.C_)(["form-control",{"is-invalid":t["Price"]}]),rules:"required",name:"Price",placeholder:"請輸入售價"},null,8,["modelValue","class"]),(0,o.Wm)(n,{name:"Price",class:"invalid-feedback"})])]),X,(0,o._)("div",tt,[et,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>i.product.description=t),id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\n                  ",512),[[g.nr,i.product.description]])]),(0,o._)("div",lt,[ot,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[11]||(e[11]=t=>i.product.content=t),id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\n                  ",512),[[g.nr,i.product.content]])]),(0,o._)("div",at,[(0,o._)("div",dt,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>i.product.is_enabled=t),id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[g.e8,i.product.is_enabled]]),it])])])),_:1})])])]),(0,o._)("div",st,[rt,i.isNew?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:e[13]||(e[13]=(...t)=>s.add_product&&s.add_product(...t)),type:"button",class:"btn btn-primary"}," 確認 ")):((0,o.wg)(),(0,o.iD)("button",{key:1,onClick:e[14]||(e[14]=(...t)=>s.edit_product&&s.edit_product(...t)),type:"button",class:"btn btn-primary"},"儲存"))])])])],512)}var ct=l(7972),ut=l.n(ct),pt={data(){return{modal:"",product:{},isNew:!1}},methods:{open_modal(t,e){"new"===t?(this.isNew=!0,this.product={},this.modal.show()):"edit"===t&&(this.isNew=!1,this.product={...e},this.modal.show())},add_product(){const t="https://vue3-course-api.hexschool.io/v2/api/sihle/admin/product",e=this.product;this.$http.post(t,{data:e}).then((t=>{t.data.success&&(this.$emit("update"),this.modal.hide())})).catch((t=>{console.log(t.response)}))},edit_product(){const t=`https://vue3-course-api.hexschool.io/v2/api/sihle/admin/product/${this.product.id}`,e=this.product;this.$http.put(t,{data:e}).then((t=>{t.data.success&&(this.$emit("update"),this.modal.hide())})).catch((t=>{console.log(t.response)}))},add_image(){this.product.imagesUrl||(this.product.imagesUrl=[]),this.product.imagesUrl.push("")},del_image(){this.product.imagesUrl.pop()},upload_image(){const t="https://vue3-course-api.hexschool.io/v2/api/sihle/admin/upload",e=this.$refs.file.files[0],l=new FormData;l.append("file-to-upload",e),this.$http.post(t,l).then((t=>{t.data.success&&(this.product.imageUrl=t.data.imageUrl)}))}},mounted(){this.modal=new(ut())(this.$refs.productModal)}},mt=l(89);const bt=(0,mt.Z)(pt,[["render",nt],["__scopeId","data-v-5cd9b380"]]);var _t=bt;const ht={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},gt={class:"modal-dialog"},ft={class:"modal-content border-0"},vt=(0,o._)("div",{class:"modal-header bg-danger text-white"},[(0,o._)("h5",{id:"delProductModalLabel",class:"modal-title"},[(0,o._)("span",null,"刪除產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),yt={class:"modal-body"},wt=(0,o.Uk)(" 是否刪除 "),kt={class:"text-danger"},Ut=(0,o.Uk)(" 商品(刪除後將無法恢復)。 "),xt={class:"modal-footer"},Ct=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Dt(t,e,l,d,i,s){return(0,o.wg)(),(0,o.iD)("div",ht,[(0,o._)("div",gt,[(0,o._)("div",ft,[vt,(0,o._)("div",yt,[wt,(0,o._)("strong",kt,(0,a.zw)(i.product.title),1),Ut]),(0,o._)("div",xt,[Ct,(0,o._)("button",{onClick:e[0]||(e[0]=(...t)=>s.delete_product&&s.delete_product(...t)),type:"button",class:"btn btn-danger"},"確認刪除")])])])],512)}var Mt={data(){return{modal:"",product:{}}},methods:{open_modal(t){this.product=t,this.modal.show()},delete_product(){const t=`https://vue3-course-api.hexschool.io/v2/api/sihle/admin/product/${this.product.id}`;this.$http.delete(t).then((t=>{t.data.success&&(this.$emit("update"),this.modal.hide())})).catch((t=>{console.log(t.response)}))}},mounted(){this.modal=new(ut())(this.$refs.delProductModal)}};const Vt=(0,mt.Z)(Mt,[["render",Dt]]);var Pt=Vt,$t=l(5500),Wt={components:{ProductModal:_t,DelProductModal:Pt,Pagination:$t.Z},data(){return{products:[],pagination:{}}},methods:{get_products(t=1){const e=`https://vue3-course-api.hexschool.io/v2/api/sihle/admin/products?page=${t}`;this.$http.get(e).then((t=>{t.data.success&&(this.products=t.data.products,this.pagination=t.data.pagination)}))},open_modal(t,e){"new"===t?this.$refs.productModal.open_modal(t):"edit"===t?this.$refs.productModal.open_modal(t,e):this.$refs.delProductModal.open_modal(e)}},mounted(){this.get_products()}};const qt=(0,mt.Z)(Wt,[["render",h]]);var zt=qt}}]);
//# sourceMappingURL=947.7f2ac148.js.map